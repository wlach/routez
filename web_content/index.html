
<head>
  <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key={{ key }}" type="text/javascript"></script>

  <script src="labeled_marker.js" type="text/javascript"></script>
  <script src="openrp.js" type="text/javascript"></script>
  <script type="text/javascript">
    function load() {
        // hide the route plan when the page is first loaded
        document.getElementById('route-plan').style.display = 'none';
    if (GBrowserIsCompatible()) {
        GDownloadUrl("/json/stoplist", loadStopListCallback);
        GDownloadUrl("/json/routelist", loadRouteListCallback);

        //sizeRouteList();
        var map_dom = document.getElementById("map");
        map = new GMap2(map_dom);
        map.addControl(new GLargeMapControl());
        var bb = new GLatLngBounds(new GLatLng({{ min_lat }}, {{ min_lon }}),new GLatLng({{ max_lat }}, {{ max_lon }}));
        map.setCenter(bb.getCenter(), map.getBoundsZoomLevel(bb));
        map.enableDoubleClickZoom();

        geocoder = new GClientGeocoder();
        initIcons();

        //GEvent.addListener(map, "moveend", callbackMoveEnd);
        //GEvent.addListener(map, "zoomend", callbackZoomEnd);
        //callbackMoveEnd();  // Pretend we just moved to current center
        //fetchRoutes();
      }
    }
  </script>

  <link href="style.css" rel="stylesheet" type="text/css" />
  <style type="text/css">
    v\:* {
    behavior:url(#default#VML);
    }
  </style>

</head>
<body class='sidebar-left' onload="load();" onunload="GUnload()">
  <div id='content'>
    <div id='sidebar-wrapper'><div id='sidebar'>
	<div id="logo" class="sidebar-box">
	  <h1 id="logo-text"><a href="/">Routez</a></h1>
	</div>
	<div id="intro" class="sidebar-box">
	  <p>Routez.ca is an <b>unofficial</b> service providing trip planning 
	    and other services for users of 
	    <a href="http://www.halifax.ca/metrotransit/">Metro 
	      Transit</a> in the greater area of Halifax, Nova Scotia. Try it 
	    and see! </p> 
	</div>
 	<div id="route-plan" class="sidebar-box">
	    <b>Travel from X to Y...</b>
	    <div id="route-plan-content">
	    </div>
	</div>
	<div id="plan-trip" class="input-box">
	  <div class="title">Plan a trip</div>
	  <div class="fieldset">
	    <form id="routePlan" onSubmit="mysubmit(); return false;">
	      <label class="label" for="routePlanStart">From:</label>
	      <input type="text" id="routePlanStart" class="textfield"/>
	      <p class="example">Example: North and Agricola</p>
	      <label class="label" for="routePlanEnd">To:</label>
	      <input type="text" id="routePlanEnd" class="textfield"/>
	      <p class="example">Example: 1496 Lower Water</p>
	      <label class="label" for="time">Time:</label>
	      <input type="text" id="time" class="textfield"/>
	      <p class="example">Example: 9:26am</p>
	      <input value="Plan!" class="button" type="submit">
	    </form> 
	  </div>
	</div>
    </div></div>
    
    <div id="map-wrapper"> <div id="map"></div></div>
  </div>

</body>
