<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<head>
  <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key={{ key }}" type="text/javascript"></script>

  <script src="labeled_marker.js" type="text/javascript"></script>
  <script src="openrp.js" type="text/javascript"></script>
  <script type="text/javascript">
    function load() {
        // hide the route plan when the page is first loaded
        document.getElementById('route-plan').style.display = 'none';
    if (GBrowserIsCompatible()) {
        GDownloadUrl("/json/stoplist", loadStopListCallback);
        GDownloadUrl("/json/routelist", loadRouteListCallback);

        //sizeRouteList();
        var map_dom = document.getElementById("map");
        map = new GMap2(map_dom);
        map.addControl(new GLargeMapControl());
        var bb = new GLatLngBounds(new GLatLng({{ min_lat }}, {{ min_lon }}),new GLatLng({{ max_lat }}, {{ max_lon }}));
        map.setCenter(bb.getCenter(), map.getBoundsZoomLevel(bb));
        map.enableDoubleClickZoom();

        geocoder = new GClientGeocoder();
        initIcons();

        //GEvent.addListener(map, "moveend", callbackMoveEnd);
        //GEvent.addListener(map, "zoomend", callbackZoomEnd);
        //callbackMoveEnd();  // Pretend we just moved to current center
        //fetchRoutes();
      }
    }
  </script>

  <link href="style.css" rel="stylesheet" type="text/css" />
  <style type="text/css">
    v\:* {
    behavior:url(#default#VML);
    }
  </style>

</head>
<body onload="load();" onunload="GUnload()">
  <div id='header'>
    <div id='header-logo'>
      <img src="routez-logo.png"/>
    </div>
  </div>
  <div id='content'>
      <div id='sidebar-wrapper'>
	<div id='sidebar'>
	  <div id="intro" class="sidebar-box">
	    <p>Routez.ca is an <b>unofficial</b> service providing trip planning 
	      and other services for users of 
	      <a href="http://www.halifax.ca/metrotransit/">Metro 
		Transit</a> in the greater area of Halifax, Nova Scotia. Try it 
	      and see! </p> 
	  </div>
 	  <div id="route-plan" class="sidebar-box">
	    <div class="title">Directions</div>
	    <div class="contents">
	      <div id="route-plan-content">
	      </div>
	      <p>Did that sound sensible? Was it what you expected? 
		<a href="mailto:wrlach@gmail.com">Let me know.</a></p>
	    </div>
	  </div>
	  <div class="sidebar-box">
	    <div class="title">Plan a trip</div>
	    <div class="contents">
	      <form id="routePlan" onSubmit="mysubmit(); return false;">
		<label class="label" for="routePlanStart">From:</label>
		<input type="text" id="routePlanStart" class="textfield"/>
		<p class="example">Example: North and Agricola</p>
		<label class="label" for="routePlanEnd">To:</label>
		<input type="text" id="routePlanEnd" class="textfield"/>
		<p class="example">Example: 1496 Lower Water</p>
		<label class="label" for="time">Time:</label>
		<input type="text" id="time" class="textfield"/>
		<p class="example">Example: 9:26am</p>
		<input value="Plan!" class="button" type="submit">
	      </form> 
	    </div>
	  </div>
	</div>    
      </div>
      <div id="map-wrapper"> <div id="map"></div></div>       
  </div>
  <div id="footer">
    Routez is copyright 2008 William Lachance. It are my routez.ca. <a href="about">Learn more...</a>
  </div>
</body>
